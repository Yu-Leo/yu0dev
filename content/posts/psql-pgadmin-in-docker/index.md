---
title: PostgreSQL + pgAdmin –≤ Docker –Ω–∞ Linux
slug: psql-pgadmin-in-docker
date: 2024-02-15
tags: ["linux", "docker", "postgresql", "note"]
description: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å PostgreSQL –∏ pgAdmin –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–∞ Linux"
keywords: ["linux", "docker", "postgresql", "pgadmin", "psql"]
---

## –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏
–•–æ—á—É –ø–æ–¥–Ω—è—Ç—å [PostgreSQL](https://www.postgresql.org/) –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Manjaro + KDE) –¥–ª—è —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª–µ–π –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º —á–µ—Ä–µ–∑ [pgAdmin](https://www.pgadmin.org/) –∏ [psql](https://www.postgresql.org/docs/current/app-psql.html) .
## –†–µ—à–µ–Ω–∏–µ
–ú–æ–π –≤—ã–±–æ—Ä –ø–∞–ª –Ω–∞ [**Docker**](https://www.docker.com/), –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–¥—É–º–∞–Ω–Ω–æ–µ —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –≤–ª–∏—è–Ω–∏–µ–º –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É. *–ê –µ—â—ë –ø–æ—Ç–æ–º—É —á—Ç–æ —è –Ω–µ —Å–º–æ–≥ –±—ã—Å—Ç—Ä–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å pgAdmin –Ω–∞–ø—Ä—è–º—É—é –≤ Manjaro ¬Ø\\_(„ÉÑ)_/¬Ø*

–í –Ω–∞—á–∞–ª–µ [—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker](https://docs.docker.com/get-docker/), –µ—Å–ª–∏ –æ–Ω —É –≤–∞—Å –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

–ú—ã –±—É–¥–µ–º –ø–æ–¥–Ω–∏–º–∞—Ç—å –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: –æ–¥–∏–Ω —Å [PostgreSQL](https://hub.docker.com/_/postgres), –¥—Ä—É–≥–æ–π ‚Äî —Å [pgAdmin](https://hub.docker.com/r/dpage/pgadmin4/). –û–±—ä–µ–¥–∏–Ω–∏–º –∏—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ [docker compose](https://docs.docker.com/compose/). –°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ñ–∞–π–ª –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```yaml {lineNos=false title="docker-compose.yaml"}
version: "3.8"

services:
  postgres:
    image: postgres:16.3-alpine
    environment:
      POSTGRES_PASSWORD: postgres
      POSTGRES_USER: postgres
    ports:
      - "5432:5432"
    volumes:
      - postgres:/var/lib/postgresql/data

  pgadmin:
    image: dpage/pgadmin4:8.6
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@pgadmin.com
      PGADMIN_DEFAULT_PASSWORD: password
      PGADMIN_LISTEN_PORT: 80
    ports:
      - "15432:80"
    volumes:
      - pgadmin:/var/lib/pgadmin
    depends_on:
      - postgres

volumes:
  postgres:
  pgadmin:
```

*[–ò—Å—Ç–æ—á–Ω–∏–∫ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è](https://anasdidi.dev/articles/200713-docker-compose-postgres/).*

–Ø –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é –Ω–∞—Ä—É–∂—É `5432` –ø–æ—Ä—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ö–æ—á—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å postgres-–æ–º –∏–∑ —Ö–æ—Å—Ç–æ–≤–æ–π –û–° —á–µ—Ä–µ–∑ `psql`.
### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
–ß—Ç–æ–±—ã **–∑–∞–ø—É—Å—Ç–∏—Ç—å** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
```shell
docker compose up -d
```
–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–Ω—ã–º –≤—ã—à–µ `docker-compose.yaml` —Ñ–∞–π–ª–æ–º.

üëâ –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è, –Ω–∞ [http://localhost:15432/](http://localhost:15432/) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–µ–±-–≤–µ—Ä—Å–∏—è pgAdmin.

**–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞** –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤ `docker-compose.yaml`: 
- –õ–æ–≥–∏–Ω: `admin@pgadmin.com` ‚Äî –ø–æ–ª–µ`PGADMIN_DEFAULT_EMAIL`
- –ü–∞—Ä–æ–ª—å: `password` ‚Äî –ø–æ–ª–µ`PGADMIN_DEFAULT_PASSWORD`

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å.

**–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** –Ω–∞–∂–º–∏—Ç–µ "*Add New Server*", —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL.
- Host name/address: `postgres` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ c postgres –≤ `docker-compose.yaml`
- Username:  `postgres` ‚Äî –ø–æ–ª–µ `POSTGRES_USER`
- Password: `postgres` ‚Äî –ø–æ–ª–µ `POSTGRES_PASSWORD`

**Profit** üéÜ. –ü–æ–ª—å–∑—É–π—Ç–µ—Å—å pgAdmin.

–ß—Ç–æ–±—ã **–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
```shell
docker compose down
```
–ü—Ä–∏ —ç—Ç–æ–º **–¥–∞–Ω–Ω—ã–µ** –∏ PostgreSQL –∏ pgAdmin **–æ—Å—Ç–∞–Ω—É—Ç—Å—è** –∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ [docker volume](https://docs.docker.com/storage/volumes/)-–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –æ–ø–∏—Å–∞–ª–∏ –≤ `docker-compose.yaml`.
### –î–∞–Ω–Ω—ã–µ pgAdmin
–í pgAdmin –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∞–π–ª—ã: –±—ç–∫–∞–ø—ã, ER –¥–∏–∞–≥—Ä–∞–º–º—ã –±–∞–∑. –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –≤ GUI pgAdmin –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –ª–µ–∂–∞—Ç –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã. –ù–µ –≤–µ—Ä—å—Ç–µ –µ–º—É! –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–Ω–∏ –ª–µ–∂–∞—Ç –≤ docker volume (*–æ—á–µ–≤–∏–¥–Ω–æ*), –Ω–æ –Ω–µ –≤ –µ–≥–æ –∫–æ—Ä–Ω–µ (*—É–∂–µ –º–µ–Ω–µ–µ –æ—á–µ–≤–∏–¥–Ω–æ, –Ω–æ —Ñ–∞–∫—Ç*).

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:**
1. –ó–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```shell
docker exec -it <containerName> sh
```

2. –í–Ω—É—Ç—Ä–∏ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```shell
cd /var/lib/pgadmin/storage/admin_pgadmin.com
```
`admin_pgadmin.com` ‚Äî email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ –∫–æ—Ç–æ—Ä–æ–º `@` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `_`

3. *–í–æ—Ç —Ç—É—Ç-—Ç–æ –æ–Ω–∏ –∏ –ø—Ä–∏—Ç–∞–∏–ª–∏—Å—å.* –ú–æ–∂–Ω–æ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ `ls -lah`, –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ `less` –∏ –¥–∞–∂–µ –æ—Ç–∫—Ä—ã—Ç—å –∏—Ö –≤ `vi`!

**–°—Ç—è–Ω—É—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ö–æ—Å—Ç–æ–≤—É—é –û–°:**
```shell
docker cp <containerId>:/file/path/within/container /host/path/target
```

–ò–º—è –∏ Id –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –≤–∑–≥–ª—è–Ω—É–≤ –Ω–∞ —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∫–æ–º–∞–Ω–¥–æ–π
```shell
docker ps
```

üí°Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —É—Ç–∏–ª–∏—Ç—ã [lazydocker](https://github.com/jesseduffield/lazydocker).

### –ë—ç–∫–∞–ø—ã –≤ pgAdmin
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ñ–∞–π–ª—ã –±—ç–∫–∞–ø–æ–≤ –∏–º–µ–ª–∏ —á–µ–ª–æ–≤–µ–∫–æ—á–∏–∫–∞–µ–º—ã–π –≤–∏–¥, –∏—Ö –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
![./backup-settings.png](./backup-settings.png)

‚ùó –í–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –º–Ω–µ **–Ω–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –ë–î –≤ pgAdmin —á–µ—Ä–µ–∑ —Ç–∞–∫–æ–π –±—ç–∫–∞–ø, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –±—ç–∫–∞–ø–∞ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `Custom` ‚Äî –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
### psql
–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É —Å postgres-–æ–º –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```shell
psql -h localhost -p 5432 -U postgres -d dbname
```

`dbname` ‚Äî –∏–º—è –ë–î, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è

–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤ `docker-compose.yaml`: 
- –õ–æ–≥–∏–Ω: `postgres` ‚Äî –ø–æ–ª–µ `POSTGRES_USER`
- –ü–∞—Ä–æ–ª—å: `postgres` ‚Äî –ø–æ–ª–µ `POSTGRES_PASSWORD`

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å.

[–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ psql](https://www.oslogic.ru/knowledge/598/shpargalka-po-osnovnym-komandam-postgresql/).
## –í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ

ü¶Å –ü–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–º—Å—è –ø—Ä–æ–π—Ç–∏ ["–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –ø–æ SQL"](https://stepik.org/course/63054/promo ) –Ω–∞ Stepik. –ö—É—Ä—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ SQL –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π.
